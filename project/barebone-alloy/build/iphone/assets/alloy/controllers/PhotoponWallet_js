function __processArg(e,t){var o=null;return e&&(o=e[t]||null,delete e[t]),o}function Controller(){function e(){o.ind.show()}function t(){o.ind.hide()}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="PhotoponWallet",this.args=arguments[0]||{},arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var o=this,l={};o.__views.winPhotoponWallet=Ti.UI.createWindow({backgroundColor:Alloy.Globals.ThemeStyles.win.backgroundColor,title:"Wallet",navTintColor:Alloy.Globals.ThemeStyles.win.navTintColor,barColor:Alloy.Globals.ThemeStyles.win.barColor,translucent:!1,id:"winPhotoponWallet"}),o.__views.winPhotoponWallet&&o.addTopLevelView(o.__views.winPhotoponWallet),o.__views.photoponWalletTable=Ti.UI.createTableView({showVerticalScrollIndicator:!1,height:"auto",backgroundColor:"transparent",separatorColor:"transparent",id:"photoponWalletTable"}),o.__views.winPhotoponWallet.add(o.__views.photoponWalletTable),o.__views.ind=Ti.UI.createActivityIndicator({indicatorDiameter:160,indicatorColor:Alloy.Globals.ThemeColors.black,color:Alloy.Globals.ThemeColors.black,id:"ind"}),o.__views.winPhotoponWallet.add(o.__views.ind),l.destroy=function(){},_.extend(o,o.__views),arguments[0]||{},o.winPhotoponWallet.addEventListener("open",function(){e();var l=[];API.GetWalletItems(UTL.userInfo().uid,function(e){for(var i=[],r=0;r<e.length;++r)i.push(e[r].photopon);API.GetPhotopons(i,function(e){for(var t=[],i=0;i<e.length;++i)t.push(e[i].coupon_id);API.GetCoupons(t,function(t){for(var i=0;i<e.length;++i){var r=Alloy.createController("WalletItemRow",t[i]).getView();l.push(r)}if(l.length>0)o.photoponWalletTable.setData(l);else{var n=Titanium.UI.createTableViewRow();n.add(Titanium.UI.createLabel({text:"You have no photopons in Wallet :("})),o.photoponWalletTable.setData([n])}})}),t()})}),_.extend(o,l)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;