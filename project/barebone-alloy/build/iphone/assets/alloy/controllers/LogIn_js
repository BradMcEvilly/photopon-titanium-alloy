function __processArg(e,t){var o=null;return e&&(o=e[t]||null,delete e[t]),o}function Controller(){function e(){o(),t(),i()}function t(){""==c.emailField.value?c.emailField.focus():c.passwordField.focus()}function o(){c.winLogIn.setTitleControl(Alloy.createController("titleControl",{title:"Log In"}).getView()),Titanium.App.addEventListener("LOGIN_ERROR",function(e){n(e.message)}),Titanium.App.addEventListener("DID_LOGIN",function(){u(),c.winLogIn.close()});var e=y.userInfo().username;e&&c.emailField.setValue(e)}function l(){c.passwordField.focus()}function i(){c.btnLogIn.setVisible(a()?!0:!1)}function r(){Titanium.Network.online?(d(),w.Login(c.emailField.value,c.passwordField.value)):Alloy.Globals.showError("Check Internet Connection")}function n(e){c.lblLogIn.setText(e),setTimeout(function(){c.lblLogIn.setText("LOGIN")},5e3)}function a(){return y.isBlankString(c.emailField.value)||y.isBlankString(c.passwordField.value)?!1:!0}function s(e){e?(c.emailField.setEditable(!1),c.passwordField.setEditable(!1)):(c.emailField.setEditable(!0),c.passwordField.setEditable(!0))}function d(){c.ind.show(),s(!0),c.lblLogIn.setVisible(!1)}function u(){c.ind.hide(),s(!1),c.lblLogIn.setVisible(!0)}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="LogIn",this.args=arguments[0]||{},arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var c=this,h={},b={};c.__views.winLogIn=Ti.UI.createWindow({backgroundColor:Alloy.Globals.ThemeStyles.win.backgroundColor,title:"Log In",titleAttributes:Alloy.Globals.ThemeStyles.win.titleAttributes,navTintColor:Alloy.Globals.ThemeStyles.win.navTintColor,barColor:Alloy.Globals.ThemeStyles.win.barColor,translucent:Alloy.Globals.ThemeStyles.win.translucent,id:"winLogIn"}),c.__views.winLogIn&&c.addTopLevelView(c.__views.winLogIn),e?c.__views.winLogIn.addEventListener("open",e):b["$.__views.winLogIn!open!winLogInOpenHandler"]=!0;var g=[];c.__views.row=Ti.UI.createTableViewRow({height:"auto",selectionStyle:"none",id:"row"}),g.push(c.__views.row),c.__views.emailField=Ti.UI.createTextField({autocapitalization:!1,color:Alloy.Globals.ThemeStyles.textfield.color,height:Alloy.Globals.ThemeStyles.textfield.height,top:Alloy.Globals.ThemeStyles.button.padding,hintText:"Username*",left:Alloy.Globals.ThemeStyles.button.padding,right:Alloy.Globals.ThemeStyles.button.padding,width:Ti.UI.FILL,font:Alloy.Globals.ThemeStyles.textfield.font,paddingLeft:Alloy.Globals.ThemeStyles.button.padding,borderColor:Alloy.Globals.ThemeStyles.textfield.borderColor,borderStyle:Alloy.Globals.ThemeStyles.textfield.borderStyle,borderRadius:Alloy.Globals.ThemeStyles.textfield.borderRadius,id:"emailField"}),c.__views.row.add(c.__views.emailField),i?c.__views.emailField.addEventListener("change",i):b["$.__views.emailField!change!validateLogIn"]=!0,l?c.__views.emailField.addEventListener("return",l):b["$.__views.emailField!return!focusNext"]=!0,c.__views.row=Ti.UI.createTableViewRow({height:"auto",selectionStyle:"none",id:"row"}),g.push(c.__views.row),c.__views.passwordField=Ti.UI.createTextField({autocapitalization:!1,color:Alloy.Globals.ThemeStyles.textfield.color,height:Alloy.Globals.ThemeStyles.textfield.height,top:Alloy.Globals.ThemeStyles.button.padding,hintText:"Password*",left:Alloy.Globals.ThemeStyles.button.padding,right:Alloy.Globals.ThemeStyles.button.padding,width:Ti.UI.FILL,font:Alloy.Globals.ThemeStyles.textfield.font,paddingLeft:Alloy.Globals.ThemeStyles.button.padding,borderColor:Alloy.Globals.ThemeStyles.textfield.borderColor,borderStyle:Alloy.Globals.ThemeStyles.textfield.borderStyle,borderRadius:Alloy.Globals.ThemeStyles.textfield.borderRadius,id:"passwordField",passwordMask:"true"}),c.__views.row.add(c.__views.passwordField),i?c.__views.passwordField.addEventListener("change",i):b["$.__views.passwordField!change!validateLogIn"]=!0,r?c.__views.passwordField.addEventListener("return",r):b["$.__views.passwordField!return!submitBtnHandler"]=!0,c.__views.row=Ti.UI.createTableViewRow({height:"auto",selectionStyle:"none",id:"row"}),g.push(c.__views.row),c.__views.btnLogIn=Ti.UI.createView({top:Alloy.Globals.ThemeStyles.buttonPink.padding,left:Alloy.Globals.ThemeStyles.buttonPink.padding,right:Alloy.Globals.ThemeStyles.buttonPink.padding,width:Ti.UI.FILL,height:Alloy.Globals.ThemeStyles.buttonPink.height,color:Alloy.Globals.ThemeStyles.buttonPink.color,backgroundColor:Alloy.Globals.ThemeStyles.buttonPink.backgroundColor,borderColor:Alloy.Globals.ThemeStyles.buttonPink.borderColor,borderStyle:Alloy.Globals.ThemeStyles.buttonPink.borderStyle,borderRadius:Alloy.Globals.ThemeStyles.buttonPink.borderRadius,borderWidth:Alloy.Globals.ThemeStyles.buttonPink.borderWidth,font:Alloy.Globals.ThemeStyles.buttonPink.font,id:"btnLogIn",visible:"false"}),c.__views.row.add(c.__views.btnLogIn),c.__views.lblLogIn=Ti.UI.createLabel({text:"LOG IN",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,verticalAlign:Ti.UI.TEXT_VERTICAL_ALIGNMENT_CENTER,color:Alloy.Globals.ThemeStyles.button.color,font:Alloy.Globals.ThemeStyles.button.font,width:"auto",height:"auto",touchEnabled:!1,id:"lblLogIn"}),c.__views.btnLogIn.add(c.__views.lblLogIn),c.__views.ind=Ti.UI.createActivityIndicator({style:Ti.UI.iPhone.ActivityIndicatorStyle.BIG,indicatorColor:Alloy.Globals.ThemeColors.black,indicatorDiameter:"75dp",id:"ind"}),c.__views.btnLogIn.add(c.__views.ind),c.__views.logInTable=Ti.UI.createTableView({scrollable:!1,showVerticalScrollIndicator:!1,height:"auto",backgroundColor:"transparent",separatorStyle:"none",borderWidth:0,data:g,id:"logInTable"}),c.__views.winLogIn.add(c.__views.logInTable),h.destroy=function(){},_.extend(c,c.__views);var m=require("ti.cloud"),w=require("apiHelper"),y=require("utl");Titanium.Cloud=m,c.winLogIn.backButtonTitle="",c.winLogIn.addEventListener("close",function(){c.destroy()}),c.btnLogIn.addEventListener("touchstart",function(){c.btnLogIn.backgroundColor=Alloy.Globals.ThemeStyles.button.selectedBackgroundColor}),c.btnLogIn.addEventListener("touchcancel",function(){c.btnLogIn.backgroundColor=Alloy.Globals.ThemeStyles.button.backgroundColor}),c.btnLogIn.addEventListener("touchend",function(){c.btnLogIn.backgroundColor=Alloy.Globals.ThemeStyles.button.backgroundColor,r()}),b["$.__views.winLogIn!open!winLogInOpenHandler"]&&c.__views.winLogIn.addEventListener("open",e),b["$.__views.emailField!change!validateLogIn"]&&c.__views.emailField.addEventListener("change",i),b["$.__views.emailField!return!focusNext"]&&c.__views.emailField.addEventListener("return",l),b["$.__views.passwordField!change!validateLogIn"]&&c.__views.passwordField.addEventListener("change",i),b["$.__views.passwordField!return!submitBtnHandler"]&&c.__views.passwordField.addEventListener("return",r),_.extend(c,h)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;