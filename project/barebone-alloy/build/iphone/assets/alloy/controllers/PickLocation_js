function __processArg(e,t){var o=null;return e&&(o=e[t]||null,delete e[t]),o}function Controller(){require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="PickLocation",this.args=arguments[0]||{},arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var e=this,t={};e.__views.winPickLocation=Ti.UI.createWindow({backgroundColor:Alloy.Globals.ThemeStyles.win.backgroundColor,titleAttributes:Alloy.Globals.ThemeStyles.win.titleAttributes,navTintColor:Alloy.Globals.ThemeStyles.win.navTintColor,barColor:Alloy.Globals.ThemeStyles.win.barColor,translucent:Alloy.Globals.ThemeStyles.win.translucent,height:Ti.UI.FILL,id:"winPickLocation",title:"Pick Location"}),e.__views.winPickLocation&&e.addTopLevelView(e.__views.winPickLocation),e.__views.mapView=Ti.UI.createView({id:"mapView"}),e.__views.winPickLocation.add(e.__views.mapView),t.destroy=function(){},_.extend(e,e.__views);var o=arguments[0]||{},l=require("ti.map");e.winPickLocation.addEventListener("open",function(){UTL.defaultTitle({title:"Pick Location"});var t=UTL.userInfo().role;if("merchant"==t){var i=l.createAnnotation({latitude:-33.8569,longitude:151.2153,centerOffset:{x:0,y:0},draggable:!0,showInfoWindow:!0,rightButton:Ti.UI.iPhone.SystemButton.CONTACT_ADD,title:"Pick Location",subtitle:"Please pick location to add"}),r=l.createView({mapType:l.NORMAL_TYPE,animate:!0,regionFit:!0,userLocation:!0,annotations:[i]});r.addEventListener("pinchangedragstate",function(e){console.log(e.type),console.log(e)}),r.addEventListener("click",function(t){"rightButton"==t.clicksource&&(o.callback({lng:t.annotation.getLongitude(),lat:t.annotation.getLatitude()}),e.winPickLocation.close())}),e.mapView.add(r)}}),_.extend(e,t)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;