function __processArg(e,t){var o=null;return e&&(o=e[t]||null,delete e[t]),o}function Controller(){require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="PhotoponNotifications",this.args=arguments[0]||{},arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var e=this,t={};e.__views.winNotifications=Ti.UI.createWindow({id:"winNotifications",title:"Notifications"}),e.__views.winNotifications&&e.addTopLevelView(e.__views.winNotifications),t.destroy=function(){},_.extend(e,e.__views),arguments[0]||{};var o=PUI.DecorateWindow(e.winNotifications);PUI.Awesomize(o);var l=PUI.CreateTable(o);l.top=40,l.bottom=0;var i=null,r=0,n=function(){Cloud.Chats.query({participate_ids:[UTL.userInfo().uid].join(","),where:{updated_at:{$gt:r}}},function(e){if(!e.success)return void console.log("Failed to get messages");for(var t=e.chats.length-1;t>=0;t--){var o=e.chats[t];r=o.updated_at,console.log(o.from.username,o.message)}console.log(e.chats)})};o.addEventListener("open",function(){i&&(console.log("Cancelling update timer"),clearInterval(i),i=null),r=0,console.log("Creating update timer"),i=setInterval(n,3e3),n()}),o.addEventListener("close",function(){i&&(console.log("Cancelling update timer"),clearInterval(i),i=null)}),_.extend(e,t)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;