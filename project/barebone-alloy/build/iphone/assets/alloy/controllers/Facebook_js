function __processArg(e,t){var o=null;return e&&(o=e[t]||null,delete e[t]),o}function Controller(){function e(){Titanium.Facebook.loggedIn?(Titanium.Facebook.logout(),alert("Titanium.Facebook.logout()")):(Titanium.Facebook.authorize(),alert("Titanium.Facebook.authorize()"))}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="Facebook",this.args=arguments[0]||{},arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var t=this,o={},l={};t.__views.winFacebook=Ti.UI.createWindow({backgroundColor:Alloy.Globals.ThemeStyles.win.backgroundColor,title:"Facebook",navTintColor:Alloy.Globals.ThemeStyles.win.navTintColor,barColor:Alloy.Globals.ThemeStyles.win.barColor,translucent:!1,id:"winFacebook"}),t.__views.winFacebook&&t.addTopLevelView(t.__views.winFacebook);var i=[];t.__views.row=Ti.UI.createTableViewRow({id:"row"}),i.push(t.__views.row),t.__views.fbLoginBtn=Ti.UI.createButton({width:"160dp",height:"54dp",backgroundColor:"#3b5998",color:"white",title:"Login with Facebook",id:"fbLoginBtn"}),t.__views.row.add(t.__views.fbLoginBtn),e?t.__views.fbLoginBtn.addEventListener("click",e):l["$.__views.fbLoginBtn!click!fbLoginBtnHandler"]=!0,t.__views.row=Ti.UI.createTableViewRow({id:"row"}),i.push(t.__views.row);var r={},n={properties:{name:"buttonItem",height:Ti.UI.SIZE}};r.buttonItem=n;var a=[],s={type:"Ti.UI.ImageView",bindId:"pic",properties:{width:"50dp",height:"50dp",left:0,bindId:"pic"}};a.push(s);var d={type:"Ti.UI.View",childTemplates:function(){var e=[],t={type:"Ti.UI.Label",bindId:"textLabel",properties:{width:Ti.UI.SIZE,height:Ti.UI.SIZE,color:"#000",left:"60dp",top:0,textAlign:"left",bindId:"textLabel"}};return e.push(t),e}(),properties:{}};a.push(d);var u={properties:{height:"56dp",name:"template1"},childTemplates:a};r.template1=u;var c=[];t.__views.__alloyId22={template:"template1",properties:{id:"__alloyId22"}},c.push(t.__views.__alloyId22),t.__views.section=Ti.UI.createListSection({id:"section"}),t.__views.section.items=c;var h=[];h.push(t.__views.section),t.__views.list=Ti.UI.createListView({sections:h,templates:r,id:"list",defaultItemTemplate:"template1"}),t.__views.row.add(t.__views.list),t.__views.loginTable=Ti.UI.createTableView({data:i,id:"loginTable"}),t.__views.winFacebook.add(t.__views.loginTable),o.destroy=function(){},_.extend(t,t.__views);var b={title:"Login"};Titanium.Facebook.appid="315234305202948",Titanium.Facebook.permissions=["read_stream","email"],Titanium.Facebook.addEventListener("login",function(e){e.success?Titanium.Cloud.SocialIntegrations.externalAccountLogin({type:"facebook",token:Titanium.Facebook.accessToken},function(e){if(e.success){var t;t=new Object({detail:{didLogIn:!0}}),Titanium.App.fireEvent("app:didLogIn",t);var o=e.users[0];Titanium.API.info("User  = "+JSON.stringify(o)),Titanium.App.Properties.setString("currentUserId",o.id),alert("Success: id: "+o.id+"\\nfirst name: "+o.first_name+"\\nlast name: "+o.last_name)}else alert("Error: "+(e.error&&e.message||JSON.stringify(e)))}):e.error?alert("Error = "+e.error):e.cancelled&&alert("canceld")}),Titanium.Facebook.addEventListener("logout",function(e){if(e.success){var t;t=new Object({detail:{didLogOut:!0}}),Titanium.App.fireEvent("app:didLogOut",t)}else e.error?alert("Error = "+e.error):e.cancelled&&alert("canceld")}),t.winFacebook.setTitleControl(Alloy.createController("titleControl",{title:b.title}).getView()),l["$.__views.fbLoginBtn!click!fbLoginBtnHandler"]&&t.__views.fbLoginBtn.addEventListener("click",e),_.extend(t,o)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;