function __processArg(e,t){var o=null;return e&&(o=e[t]||null,delete e[t]),o}function Controller(){require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="SnapWrapCameraVideo",this.args=arguments[0]||{},arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var e=this,t={};t.destroy=function(){},_.extend(e,e.__views);var o=Titanium.UI.currentWindow,l=Titanium.UI.createButton({color:"#fff",backgroundImage:"/images/btn_grn_on.png",backgroundSelectedImage:"/images/btn_grn_off.png",backgroundDisabledImage:"/images/btn_gry_on.png",bottom:10,width:120,height:40,font:{fontSize:16,fontWeight:"bold",fontFamily:"Helvetica Neue"},title:"Start Video"}),i=Titanium.UI.createView();i.add(l);var r=Ti.UI.createButton({color:"#fff",title:"auto",left:20,top:20,height:40,width:80,backgroundImage:"/images/btn_dark_on.png",font:{fontSize:16,fontWeight:"bold",fontFamily:"Helvetica Neue"}});i.add(r),Ti.Media.CAMERA_FLASH_AUTO,Ti.Media.availableCameraFlashModes,r.addEventListener("click",function(){Ti.Media.cameraFlashMode==Ti.Media.CAMERA_FLASH_AUTO?(r.title="on",Ti.Media.cameraFlashMode=Ti.Media.CAMERA_FLASH_ON):Ti.Media.cameraFlashMode==Ti.Media.CAMERA_FLASH_ON?(r.title="off",Ti.Media.cameraFlashMode=Ti.Media.CAMERA_FLASH_OFF):(r.title="auto",Ti.Media.cameraFlashMode=Ti.Media.CAMERA_FLASH_AUTO)});for(var n=Ti.UI.createButton({color:"#fff",title:"front",top:20,right:20,height:40,width:80,backgroundImage:"/images/btn_drk_on.png",font:{fontSize:16,fontWeight:"bold",fontFamily:"Helvetica Neue"}}),a=Ti.Media.availableCameras,s=0;s<a.length;s++)if(a[s]==Ti.Media.CAMERA_REAR){i.add(n),n.addEventListener("click",function(){Ti.Media.camera==Ti.Media.CAMERA_FRONT?(n.title="front",Ti.Media.switchCamera(Ti.Media.CAMERA_REAR)):(n.title="rear",Ti.Media.switchCamera(Ti.Media.CAMERA_FRONT))});break}l.addEventListener("click",function(){Ti.Media.startVideoCapture(),l.title="Stop Video",l.backgroundImage="/images/btn_red_on.png",l.backgroundSelectedImage="/images/btn_red_off.png",n.visible=!1,r.visible=!1}),Titanium.Media.showCamera({success:function(e){Ti.API.debug("video was taken"),Ti.Media.hideCamera();var t=Titanium.Media.createVideoPlayer({media:e.media,backgroundColor:"#111",movieControlMode:Titanium.Media.VIDEO_CONTROL_DEFAULT,movieControlStyle:Titanium.Media.VIDEO_CONTROL_FULLSCREEN,scalingMode:Titanium.Media.VIDEO_SCALING_MODE_FILL});o.add(t)},cancel:function(){},error:function(e){var t=Titanium.UI.createAlertDialog({title:"Camera"});t.setMessage(e.code==Titanium.Media.NO_CAMERA?"Please run this test on device":"Unexpected error: "+e.code),t.show()},overlay:i,showControls:!1,mediaTypes:Ti.Media.MEDIA_TYPE_VIDEO,videoQuality:Ti.Media.QUALITY_640x480,autohide:!1}),_.extend(e,t)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;