var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._,Controller=function(){function e(){return o.__widgetId?{widgetId:o.__widgetId,name:o.__controllerPath}:o.__controllerPath}var t=[],o=this;this.__iamalloy=!0,_.extend(this,Backbone.Events,{__views:{},__proxyProperties:{},setParent:function(e){var o=t.length;if(o){this.parent=e.__iamalloy?e.parent:e;for(var l=0;o>l;l++)t[l].__iamalloy?t[l].setParent(this.parent):this.parent.add(t[l])}},addTopLevelView:function(e){t.push(e)},addProxyProperty:function(e,t){this.__proxyProperties[e]=t},removeProxyProperty:function(e){delete this.__proxyProperties[e]},getTopLevelViews:function(){return t},getView:function(e){return"undefined"==typeof e||null===e?t[0]:this.__views[e]},removeView:function(e){delete this[e],delete this.__views[e]},getProxyProperty:function(e){return this.__proxyProperties[e]},getViews:function(){return this.__views},destroy:function(){},getViewEx:function(e){var t=e.recurse||!1;if(t){var o=this.getView();return o?o.__iamalloy?o.getViewEx({recurse:!0}):o:null}return this.getView()},getProxyPropertyEx:function(e,t){var o=t.recurse||!1;if(o){var l=this.getProxyProperty(e);return l?l.__iamalloy?l.getProxyProperty(e,{recurse:!0}):l:null}return this.getView(e)},createStyle:function(t){return Alloy.createStyle(e(),t)},UI:{create:function(t,o){return Alloy.UI.create(e(),t,o)}},addClass:function(t,o,l){return Alloy.addClass(e(),t,o,l)},removeClass:function(t,o,l){return Alloy.removeClass(e(),t,o,l)},resetClass:function(t,o,l){return Alloy.resetClass(e(),t,o,l)},updateViews:function(e){var t=this.getViews();return _.isObject(e)&&_.each(_.keys(e),function(o){var l=t[o.substring(1)];0===o.indexOf("#")&&"#"!==o&&_.isObject(l)&&"function"==typeof l.applyProperties&&l.applyProperties(e[o])}),this}})};module.exports=Controller;