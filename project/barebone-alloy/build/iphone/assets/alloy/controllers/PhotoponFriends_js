function __processArg(e,t){var o=null;return e&&(o=e[t]||null,delete e[t]),o}function Controller(){require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="PhotoponFriends",this.args=arguments[0]||{},arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var e=this,t={};e.__views.winPhotoponFriends=Ti.UI.createWindow({backgroundColor:Alloy.Globals.ThemeStyles.win.backgroundColor,title:"Friends",navTintColor:Alloy.Globals.ThemeStyles.win.navTintColor,barColor:Alloy.Globals.ThemeStyles.win.barColor,translucent:!1,id:"winPhotoponFriends"}),e.__views.winPhotoponFriends&&e.addTopLevelView(e.__views.winPhotoponFriends),e.__views.photoponFriendsTable=Ti.UI.createTableView({showVerticalScrollIndicator:!1,height:"auto",backgroundColor:"transparent",separatorColor:"transparent",id:"photoponFriendsTable"}),e.__views.winPhotoponFriends.add(e.__views.photoponFriendsTable),e.__views.ind=Ti.UI.createActivityIndicator({indicatorDiameter:160,indicatorColor:Alloy.Globals.ThemeColors.black,color:Alloy.Globals.ThemeColors.black,id:"ind"}),e.__views.winPhotoponFriends.add(e.__views.ind),t.destroy=function(){},_.extend(e,e.__views);var o=arguments[0]||{},l=function(e){var t=Ti.UI.createTableViewRow({height:60,backgroundColor:"#ffffff"}),l="/images/PhotoponNavBarBtnInfo.png";e.photo&&(l=e.photo.urls.square_75);var i=Ti.UI.createImageView({image:l,left:5,visible:!0,width:50,height:50});t.add(i);var r=Ti.UI.createImageView({image:"/images/PhotoponButtonNewPhotoponCheckNoFillGreen.png",left:5,visible:!1,width:50,height:50});t.add(r);var n=Ti.UI.createImageView({image:"/images/ic_contact.png",right:5,visible:!0,width:30,height:30});t.add(n),n.addEventListener("click",function(t){return console.log(e.username,e.id),t.cancelBubble=!0,UTL.ShowPage("PhotoponChatRoom",{user:e}),!0});var a=Ti.UI.createLabel({text:e.username});return t.add(a),t.isSelected=!1,t.selectionCheck=r,t.profilePicture=i,t.user=e,o.selectionCallback?(n.visible=!1,t.addEventListener("click",function(e){e.row.isSelected=!e.row.isSelected,e.row.selectionCheck.visible=e.row.isSelected,e.row.profilePicture.visible=!e.row.isSelected})):t.addEventListener("click",function(e){console.log(e),UTL.ShowPage("ViewFriend",e.row.user)}),t};e.winPhotoponFriends.addEventListener("open",function(){if(!Titanium.Network.online)return void Alloy.Globals.showError("Poor internet connection");if(e.ind.show(),o.selectionCallback){var t=Ti.UI.createView(),i=Ti.UI.createLabel({text:"Done"});t.add(i),e.winPhotoponFriends.setRightNavButton(t),i.addEventListener("click",function(){for(var t=e.photoponFriendsTable.data[0].rows,l=[],i=0;i<t.length;i++)t[i].isSelected&&l.push(t[i].user);o.selectionCallback.call(e.winPhotoponFriends,l)})}API.GetAllFriends(function(t){console.log(t);for(var o=[],i=0;i<t.length;i++){var r=t[i];o.push(l(r))}if(o.length>0)e.photoponFriendsTable.setData(o);else{var n=Titanium.UI.createTableViewRow();n.add(Titanium.UI.createLabel({text:"You have no friends :("})),e.photoponFriendsTable.setData([n])}e.ind.hide()})}),_.extend(e,t)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;