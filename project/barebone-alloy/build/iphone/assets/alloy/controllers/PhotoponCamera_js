function __processArg(e,t){var o=null;return e&&(o=e[t]||null,delete e[t]),o}function Controller(){require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="PhotoponCamera",this.args=arguments[0]||{},arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var e=this,t={};e.__views.winPhotoponCamera=Ti.UI.createWindow({id:"winPhotoponCamera",title:"Camera"}),e.__views.winPhotoponCamera&&e.addTopLevelView(e.__views.winPhotoponCamera),t.destroy=function(){},_.extend(e,e.__views);var o=e.winPhotoponCamera;o.addEventListener("open",function(){var t=Titanium.UI.createView({height:Alloy.Globals.Frames.per100Height,width:Alloy.Globals.Frames.per100Width}),l=Titanium.UI.createView({width:260,height:200,borderColor:"red",borderWidth:5,borderRadius:15}),i=Titanium.UI.createView({backgroundColor:"#fff",height:Alloy.Globals.Frames.per100Height,width:Alloy.Globals.Frames.per100Width,visible:!1}),r=Titanium.UI.createView({height:Alloy.Globals.Frames.per100Height,width:Alloy.Globals.Frames.per100Width,visible:!1}),n=Titanium.UI.createView({height:30,width:250,backgroundColor:"#000",borderRadius:10,opacity:.7});r.add(n);var a=Titanium.UI.createLabel({text:"Picture Taken",color:"#fff",font:{fontSize:20,fontWeight:"bold",fontFamily:"Helvetica Neue"},width:"auto",height:"auto"});r.add(a);var s=Titanium.UI.createButton({backgroundImage:"/images/PhotoponButtonNewPhotoponCancel.png",backgroundSelectedImage:"/images/PhotoponButtonNewPhotoponCancelNoFill.png",top:10,left:10,width:34,height:34});s.addEventListener("click",function(){alert("btnClose clicked!"),Titanium.Media.hideCamera(),Titanium.UI.currentWindow,Ti.API.info("got click event")});var d=Alloy.createController("CustomCameraButton",{image:"/images/PhotoponButtonNewPhotoponCameraFullCircle.png",width:"74dp",height:"74dp"}).getView();d.addEventListener("click",function(){l.borderColor="blue",Ti.Media.takePicture(),i.animate({visible:!0}),setTimeout(function(){l.borderColor="red",i.animate({visible:!1})},500)});for(var u=Ti.UI.createButton({color:"#fff",title:"front",top:20,right:20,height:40,width:80,backgroundImage:"/images/btn_drk_on.png",font:{fontSize:16,fontWeight:"bold",fontFamily:"Helvetica Neue"}}),c=Ti.Media.availableCameras,_=0;_<c.length;_++)if(c[_]==Ti.Media.CAMERA_REAR){t.add(u),u.addEventListener("click",function(){Ti.Media.camera==Ti.Media.CAMERA_FRONT?(u.title="front",Ti.Media.switchCamera(Ti.Media.CAMERA_REAR)):(u.title="rear",Ti.Media.switchCamera(Ti.Media.CAMERA_FRONT))});break}Alloy.Globals.CachedCoupons=Alloy.Globals.CachedCoupons||[];for(var h=[],b=0;b<Alloy.Globals.CachedCoupons.length;b++)h.push(Alloy.createController("PhotoponOverlay",{CouponsItem:Alloy.Globals.CachedCoupons[b],tag:b}).getView());var w=Ti.UI.createScrollableView({showPagingControl:!1,currentPage:Alloy.Globals.newComposition.couponsIndex,views:h});w.setDisableBounce(!0);var g=0;w.addEventListener("scroll",function(e){g=e.currentPage}),w.addEventListener("scrollend",function(){console.log("---------------------------"),Ti.API.info("---->	currentPage: "+g),console.log("---------------------------")}),t.add(i),t.add(l),t.add(w),t.add(d),t.add(s),t.add(r);var m=Ti.UI.create2DMatrix();m=m.scale(1.25),Titanium.Media.showCamera({saveToPhotoGallery:!0,success:function(t){var l=Ti.UI.createImageView({image:t.media,width:320,height:480});o.add(l),UTL.ShowPage("PhotoponCameraPaint",{image:l.toImage(),selectedCoupon:Alloy.Globals.CachedCoupons[g]}),e.winPhotoponCamera.close()},cancel:function(){},error:function(e){var t=Titanium.UI.createAlertDialog({title:"Camera"});t.setMessage(e.code==Titanium.Media.NO_CAMERA?"Please run this test on device":"Unexpected error: "+e.code),t.show()},overlay:t,transform:m,showControls:!1,mediaTypes:Ti.Media.MEDIA_TYPE_PHOTO,autohide:!0})}),_.extend(e,t)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;