function __processArg(e,t){var o=null;return e&&(o=e[t]||null,delete e[t]),o}function Controller(){require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="PhotoponCameraPaint",this.args=arguments[0]||{},arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var e=this,t={};e.__views.winPaint=Ti.UI.createWindow({backgroundColor:Alloy.Globals.ThemeStyles.win.backgroundColor,title:"Paint",navTintColor:Alloy.Globals.ThemeStyles.win.navTintColor,barColor:Alloy.Globals.ThemeStyles.win.barColor,translucent:!1,id:"winPaint"}),e.__views.winPaint&&e.addTopLevelView(e.__views.winPaint),t.destroy=function(){},_.extend(e,e.__views);var o=arguments[0]||{},l=require("ti.paint"),i=e.winPaint;i.setBackgroundImage(o.image),i.setBackgroundColor("#000");var r=l.createPaintView({top:0,right:0,bottom:80,left:0,strokeColor:"#0f0",strokeAlpha:255,strokeWidth:7,eraseMode:!1});i.add(r);var n=Ti.UI.createButton({left:10,bottom:10,right:10,height:30,title:"Decrease Stroke Width"});n.addEventListener("click",function(e){r.strokeWidth=7===r.strokeWidth?4:7,e.source.title=7===r.strokeWidth?"Decrease Stroke Width":"Increase Stroke Width"}),i.add(n);var a=Ti.UI.createButton({bottom:100,left:10,width:75,height:30,title:"Red"});a.addEventListener("click",function(){r.strokeColor="red"});var s=Ti.UI.createButton({bottom:70,left:10,width:75,height:30,title:"Green"});s.addEventListener("click",function(){r.strokeColor="#0f0"});var d=Ti.UI.createButton({bottom:40,left:10,width:75,height:30,title:"Blue"});d.addEventListener("click",function(){r.strokeColor="#0000ff"}),i.add(a),i.add(s),i.add(d);var u=Ti.UI.createButton({bottom:40,left:100,width:75,height:30,title:"Clear"});u.addEventListener("click",function(){r.clear()}),i.add(u);var c=Ti.UI.createTextField({autocapitalization:!1,color:"#000000",top:100,height:30,hintText:"Message",left:Alloy.Globals.ThemeStyles.button.padding,right:Alloy.Globals.ThemeStyles.button.padding,width:Ti.UI.FILL,paddingLeft:Alloy.Globals.ThemeStyles.button.padding,borderColor:"#ffffff",borderStyle:Alloy.Globals.ThemeStyles.textfield.borderStyle,borderRadius:Alloy.Globals.ThemeStyles.textfield.borderRadius,backgroundColor:"#ffffff",opacity:.3});i.add(c);var h=Ti.UI.createButton({top:40,left:100,width:75,height:30,title:"Done"});h.addEventListener("click",function(){UTL.ShowPage("PhotoponFriends",{selectionCallback:function(e){return this.close(),0==e.length?void alert("No friends have been selected"):void API.UploadPhoto(o.image,function(t){API.UploadPhoto(r.toImage(),function(l){API.NewPhotopon(o.selectedCoupon,t.id,l.id,c.value,function(t){for(var o=0,l=0;l<e.length;++l)API.NewWalletItem(t.id,e[l].id,function(){o+=1,o==e.length&&alert("Congratultaions! Photopon was sent.")}),NewNotification(e[l].id,"New Photopon from "+UTL.userInfo().username,"PHOTOPON")})})})}}),i.close()}),i.add(h);var b=Ti.UI.createButton({bottom:70,right:10,width:100,height:30,title:"Alpha : 100%"});b.addEventListener("click",function(e){r.strokeAlpha=255===r.strokeAlpha?127:255,e.source.title=255===r.strokeAlpha?"Alpha : 100%":"Alpha : 50%"}),i.add(b);var w=Ti.UI.createButton({bottom:40,right:10,width:100,height:30,title:"Erase : Off"});w.addEventListener("click",function(e){r.eraseMode=r.eraseMode?!1:!0,e.source.title=r.eraseMode?"Erase : On":"Erase : Off"}),i.add(w),i.open(),_.extend(e,t)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;