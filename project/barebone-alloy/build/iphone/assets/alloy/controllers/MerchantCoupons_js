function __processArg(e,t){var o=null;return e&&(o=e[t]||null,delete e[t]),o}function Controller(){require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="MerchantCoupons",this.args=arguments[0]||{},arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var e=this,t={};e.__views.winMerchantCoupons=Ti.UI.createWindow({id:"winMerchantCoupons",title:"Coupons"}),e.__views.winMerchantCoupons&&e.addTopLevelView(e.__views.winMerchantCoupons),e.__views.merchantCouponsTable=Ti.UI.createTableView({id:"merchantCouponsTable"}),e.__views.winMerchantCoupons.add(e.__views.merchantCouponsTable),t.destroy=function(){},_.extend(e,e.__views),arguments[0]||{};var o=e.winMerchantCoupons,l=function(e){o.close(),UTL.ShowPage("AddCoupon",{edit:e})};o.addEventListener("open",function(){var t=PUI.Awesomize(o);API.GetMerchantCoupons(function(o){console.log("=== GetMerchantCoupons");for(var i=[],r=0;r<o.length;++r){var n=o[r];n.callback=l;var a=Alloy.createController("MerchantCouponRow",n).getView();i.push(a)}var s=PUI.createPhotoponButtonSmall("New Coupon");t.add(s.label,"fa-plus"),s.addEventListener("click",function(){UTL.ShowPage("AddCoupon")});var d=Ti.UI.createTableViewRow();d.add(s),i.push(d),e.merchantCouponsTable.setData(i)})}),_.extend(e,t)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;