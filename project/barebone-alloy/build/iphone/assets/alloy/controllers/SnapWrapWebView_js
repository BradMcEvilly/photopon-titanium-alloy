function __processArg(e,t){var o=null;return e&&(o=e[t]||null,delete e[t]),o}function Controller(){function e(e){console.log("---------------------------"),console.log("---------------------------"),console.log("BEGIN filter8CouponsDealURLString	-> ");var t,o,l,i;return o=new String(e),l=o.substr(o.length-1-3,o.length-1),i=o.substr(o.length-2,o.length-1),console.log("---------------------------"),console.log("rawDealURLString = "+o),console.log("---------------------------"),console.log("---------------------------"),console.log("suffixDealURLString = "+l),console.log("---------------------------"),"/aff"==l?(console.log("---------------------------"),console.log("if(suffixDealURLString == /aff)"),console.log("---------------------------"),t=new String(o.substr(0,o.length-3))):"/"!=i&&(console.log("---------------------------"),console.log("if(suffixDealURLString ==aff){		ELSE"),console.log("---------------------------"),t=""+o+"/"),console.log("---------------------------"),console.log("filteredDealURLString = "+t),console.log("---------------------------"),console.log("END filter8CouponsDealURLString	-> "),console.log("---------------------------"),console.log("---------------------------"),t}function t(){console.log("---------------------------"),console.log("---------------------------"),console.log("BEGIN  onOpenSnapWrapWebViewHandler"),console.log("---------------------------"),console.log("loadCount = "+c),console.log("---------------------------"),console.log("onOpenSnapWrapWebViewHandler loadCount = "+c+" -------  fullURLQString = "+g+" ------ $.snapWrapWebView.fullQueryString = "+r.snapWrapWebView.fullQueryString),r.snapWrapWebView.setUrl(r.snapWrapWebView.fullQueryString),console.log("---------------------------"),console.log("END  onOpenSnapWrapWebViewHandler"),console.log("---------------------------"),console.log("---------------------------")}function o(){console.log("---------------------------"),console.log("---------------------------"),console.log("BEGIN  onBeforeloadHandler"),console.log("loadCount = "+c),console.log("---------------------------"),console.log("BEFORE setLoading"),console.log("---------------------------"),console.log("$.snapWrapWebView.loading = "+r.snapWrapWebView.loading),console.log("---------------------------"),r.snapWrapWebView.setLoading(!0),console.log("AFTER setLoading"),console.log("---------------------------"),console.log("$.snapWrapWebView.loading = "+r.snapWrapWebView.loading),console.log("---------------------------"),console.log("END onBeforeloadHandler"),console.log("---------------------------"),console.log("---------------------------")}function l(e){c++,r.snapWrapWebView.setLoading(!1),console.log("---------------------------"),console.log("---------------------------"),console.log("BEGIN	$.snapWrapWebView  onLoadHandler"),console.log("hhhhhhhhhhhhhhhh loadCount = "+c),p=e.url,console.log("---------------------------"),console.log("---------------------------"),p==r.snapWrapWebView.fullQueryString?(console.log("---------------------------"),console.log("$.snapWrapWebView	onLoadHandler	if(currentURL==$.snapWrapWebView.fullQueryString){"),console.log("---------------------------"),u||(console.log("---------------------------"),console.log("if(!isTimerSet){"),console.log("---------------------------"),console.log("timeOutLimit = "+b),console.log("---------------------------"),u=!0,setTimeout(function(){i(p)},b))):console.log("onLoad URL DIFFERENT!! e.url = "+e.url+" -------- loadCount = "+c),console.log("loadCount = "+c),console.log("---------------------------"),console.log("->		WEBVIEW HTML CONTENT:"),console.log("---------------------------"),console.log("$.snapWrapWebView.html = "+r.snapWrapWebView.html),console.log("---------------------------"),console.log("---------------------------"),console.log("END  $.snapWrapWebView		onLoadHandler"),console.log("---------------------------"),console.log("---------------------------")}function i(e){console.log("---------------------------"),console.log("$.snapWrapWebView	checkIsLoadingRedirect(curURL)"),console.log("---> curURL = "+e),console.log("---------------------------"),p!=g||r.snapWrapWebView.loading||(console.log("---------------------------"),console.log("$.snapWrapWebView	checkIsLoadingRedirect	if(curURL==fullURLQString && !$.snapWrapWebView.loading){"),console.log("---------------------------"),console.log("need to reload! loadCount = "+c),console.log("---------------------------")),u=!1,console.log("---------------------------"),console.log("END $.snapWrapWebView	checkIsLoadingRedirect(curURL)"),console.log("---------------------------")}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="SnapWrapWebView",this.args=arguments[0]||{},arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var r=this,n={},a={};r.__views.winSnapWrapWebView=Ti.UI.createWindow({backgroundColor:Alloy.Globals.ThemeStyles.win.backgroundColor,barColor:Alloy.Globals.ThemeStyles.win.barColor,translucent:!1,navTintColor:Alloy.Globals.ThemeStyles.win.navTintColor,backButtonTitle:"Back",id:"winSnapWrapWebView"}),r.__views.winSnapWrapWebView&&r.addTopLevelView(r.__views.winSnapWrapWebView),t?r.__views.winSnapWrapWebView.addEventListener("open",t):a["$.__views.winSnapWrapWebView!open!onOpenSnapWrapWebViewHandler"]=!0,r.__views.snapWrapWebView=Ti.UI.createWebView({width:Ti.UI.FILL,height:Ti.UI.FILL,id:"snapWrapWebView"}),r.__views.winSnapWrapWebView.add(r.__views.snapWrapWebView),l?r.__views.snapWrapWebView.addEventListener("load",l):a["$.__views.snapWrapWebView!load!onLoadHandler"]=!0,o?r.__views.snapWrapWebView.addEventListener("beforeload",o):a["$.__views.snapWrapWebView!beforeload!onBeforeloadHandler"]=!0,n.destroy=function(){},_.extend(r,r.__views);var s,d,c,u,h,g,p,b;s=arguments[0]||{},d=this,c=0,u=!1,b=2500,r.winSnapWrapWebView.CouponsItem=s.CouponsItem,h=e(""+r.winSnapWrapWebView.CouponsItem.URL),g=h+""+Alloy.Globals.build8CouponsKeyQueryString(),p=g,r.snapWrapWebView.setLoading(!1),r.snapWrapWebView.setIgnoreSslError(!0),r.snapWrapWebView.setEnableZoomControls(!0),r.snapWrapWebView.setScalesPageToFit(!0),r.snapWrapWebView.setTouchEnabled(!0),r.snapWrapWebView.fullQueryString=""+g,console.log("---------------------------"),console.log("---------------------------"),console.log("SnapWrapWebView JS Main Stack -> "),console.log("---------------------------"),console.log("fullURLQString = "+g+" -------- $.snapWrapWebView.fullQueryString = "+r.snapWrapWebView.fullQueryString),console.log("---------------------------"),console.log("---------------------------"),r.snapWrapWebView.addEventListener("error",function(){console.log("---------------------------"),console.log("$.snapWrapWebView.addEventListener(error, function(e){"),console.log("---> ERROR"),console.log("---------------------------"),r.snapWrapWebView.setLoading(!1)}),a["$.__views.winSnapWrapWebView!open!onOpenSnapWrapWebViewHandler"]&&r.__views.winSnapWrapWebView.addEventListener("open",t),a["$.__views.snapWrapWebView!load!onLoadHandler"]&&r.__views.snapWrapWebView.addEventListener("load",l),a["$.__views.snapWrapWebView!beforeload!onBeforeloadHandler"]&&r.__views.snapWrapWebView.addEventListener("beforeload",o),_.extend(r,n)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;